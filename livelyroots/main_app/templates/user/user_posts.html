{% extends 'base.html' %}
{% load materializecss %}

{% block main %}
<div class="container">
    {% if user.username == username %}
    <h3>My Posts</h3>
    {% else %}
    <h3>{{ username }}'s posts</h3>
    {% endif %}
    <div class="row">
        <div class="col s9">
            {% if user.username == username %}
            <form action="{% url 'create_post' %}" method="POST" id="create-post-form">
                {% csrf_token %}
                {{ create_post_form | materializecss }}
                <input type="submit" class="btn" value="Create Post">
            </form>
            {% endif %}
            {% for post in posts %}
                <div class="card horizontal">
                    <div class="card-stacked">
                        <div class="card-content">
                            <p>{{ post.content }}</p>
                        </div>
                        <div class="card-action">
                            <a href="{% url 'view_post' post.id %}" class="btn-small">Comment</a>
                            {% if post.comment_set.count > 0 %}
                            <span class="new badge" data-badge-caption="comment(s)">{{ post.comment_set.count }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}